[tool.importlinter]
root_packages = [
  "apis",
  "gristcli",
  "supersetcli",
  "services",
  "models",
] 
include_external_packages = true

[[tool.importlinter.contracts]]
name = "L'architecture en couche est respectée"
type = "layers"
layers = [
  "apis",
  "gristcli",
  "supersetcli",
  "services",
  "models",
]

####################
# Règles pour les modules en dessous de app

[[tool.importlinter.contracts]]
name = "gristcli et supersetcli ne tire pas module projet"
type = "forbidden"
source_modules = [
  "gristcli",
  "supersetcli",
]
forbidden_modules = [
  "services", "models", "apis"
]


[[tool.importlinter.contracts]]
name = "les couches inférieures ne tirent pas de module infrastructure (fastapi, flask, etc...)"
type = "forbidden"
source_modules = [
  "services"
]
forbidden_modules = [
  "fastapi", "flask",
]
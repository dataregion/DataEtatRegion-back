.x-forward-variables: &forward-variables
    DO_DEPLOY: "âœ…"
    DATA_TRANSFORM_VER: $DATA_TRANSFORM_VER
    DO_DEPLOY_extra_vars: $DO_DEPLOY_extra_vars

"ğŸ£ deploy data-transform on integration":
  stage: "ğŸ£ deploy"
  trigger:
    project: SIBSGAR/DataRegateNum/stack
    branch: main
    forward:
      yaml_variables: true
      pipeline_variables: false
  variables: 
    <<: *forward-variables
    DO_DEPLOY_environment: "integ"
  when: manual

"ğŸš¨ deploy data-transform on preprod":
  stage: "ğŸ£ deploy"
  trigger:
    project: SIBSGAR/DataRegateNum/stack
    branch: main
    forward:
      yaml_variables: true
      pipeline_variables: false
  variables:
    <<: *forward-variables
    DO_DEPLOY_environment: "preprod"
  rules:
    - if: '$_ENABLE_DEPLOY_FOR_PP_AND_P == "âœ…"'
      when: manual
    - when: never
